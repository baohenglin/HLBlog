## 第9条 以“类族模式”隐藏实现细节

“类族”（class cluster）是一种很有用的模式（pattern），可以隐藏“抽象基类”（abstract base class）背后的实现细节。Objective-C的系统框架中普遍使用此模式。比如，iOS的用户界面框架（user interface framework）UIKit中就有一个名为 UIButton 的类。想创建按钮，需要调用下面这个“类方法”（class method）：

```
+ (UIButton *)buttonWithType:(UIButtonType)type;
```

该方法所返回的对象，其类型取决于传入的按钮类型（button type）。然而，不管返回什么类型的对象，它们都继承自同一个基类：UIButton。这么做的意义在于：UIButton 类的使用者无须关心创建出来的按钮具体属于哪个子类，也不用考虑按钮的绘制方式等实现细节。使用者只需明白如何创建按钮，如何设置像“标题”(title)这样的属性，如何增加触摸动作的目标对象等问题就好。回到开头说的那个问题上，我们可以把各种按钮的绘制逻辑都放在一个类里，并根据按钮类型来切换：

```
- (void)drawRect:(CGRect)rect {
  if(_type == TypeA){
      //Draw TypeA button
  } else if(_type == TypeB) {
      //Draw TypeB button
  }
}
```

这样写现在看上去还算简单，然而，若是需要依按钮类型来切换的绘制方法有许多种，那么就会变得很麻烦了。优秀的程序员会将这种代码重构为多个子类，把各种按钮所用的绘制方法放到相关子类中去。不过，这么做需要用户知道各种子类才行。此时应该使用“类族模式”，该模式可以灵活应对多个类，将它们的实现细节隐藏在抽象基类后面，以保持接口简洁。用户无须自己创建子类实例，只需调用基类方法来创建即可。
