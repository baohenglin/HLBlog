# 第 21 条：理解 Objective-C 错误模型

## 要点：

* 只有发生了可使整个应用程序崩溃的严重错误时，才应使用异常。
* 在错误不那么严重的情况下，可以指派“委托方法”（delegate method）未处理错误，也可以把错误信息放在 NSError 对象里，经由“输出参数”返回给调用者。

当前很多编程语言都有“异常”（exception）机制，Objective-C也不例外。写过 Java 代码的程序员应该很习惯于用异常来处理错误。如果你也是这么使用异常的，那现在就把它忘了吧，我们得从头学起。

首先要注意的是，“自动引用计数”（Automatic Reference Counting，ARC，参见第 30 条）在默认情况下不是“异常安全的”（exception safe）。具体来说，这意味着：如果抛出异常，那么本应该在作用域末尾释放的对象现在却不会自动释放了。**如果想生成“异常安全”的代码，可以通过设置编译器的标志来实现，不过这将引入一些额外代码，在不抛出异常时，也照样要执行这部分代码。需要打开的编译器标志叫做“-fobjc-arc-exceptions”**。
