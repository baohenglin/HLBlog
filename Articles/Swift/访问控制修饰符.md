## 访问控制

访问控制可以限定其他源文件或模块对你的代码的访问。这个特性可以让你隐藏代码的实现细节，并且能提供一个接口来让别人访问和使用你的代码。

可以明确地给单个类型（类、结构体、枚举）设置访问级别，也可以给这些类型的属性、方法、构造器、下标等设置访问级别。协议也可以被限定在一定访问级别的范围内使用，包括协议里的全局常量、变量和函数。

如果你是开发一个单 target 的应用程序，完全可以不用显式声明代码的访问级别。

## 模块和源文件

Swift 中的访问控制模型基于模块和源文件这两个概念。

**模块指的是独立的代码单元**。**框架或应用程序**会作为一个独立的模块来构建和发布。在 Swift 中，一个模块可以使用 import 关键字导入另外一个模块。

在 Swift 中， Xcode的每个 target（例如框架或应用程序）都被当作独立的模块处理。如果你是为了实现某个通用的功能，或者是为了封装一些常用方法而将代码打包成独立的框架，这个框架就是 Swift 中的一个模块。当它被导入到某个应用程序或者其他框架时，框架的内容都将属于这个独立的模块。

**源文件**就是 Swift 模块中的源代码文件（实际上，源文件属于一个应用程序或框架）。尽管我们一般会将不同的类型分别定义在不同的源文件中，但是同一个源文件也可以包含多个类型、函数等的定义。


## 访问级别

Swift为代码中的实体（属性、基本类型、函数等）提供了五种不同的访问级别。这些访问级别不仅与源文件中定义的实体相关，同时也与源文件所属的模块相关。

* **open 和 public 级别**：可以让实体被同一模块源文件中的所有实体访问。在模块外也可以通过导入该模块来访问源文件里的所有实体。通常情况下，你会通过 open 或 public 级别来指定框架的外部接口。

open 和 public 的区别：open 只能作用于类和类的成员，它和 public 的区别主要在于 open 限定的类和成员能够在模块外能被继承和重写。

* **internal 级别**：可以让实体被同一模块源文件中的任何实体访问，**但是不能被模块外的实体访问**。通常情况下，如果某个接口只在应用程序或框架内部使用，就可以将其设置为 internal 级别。
* **fileprivate 级别**：限制实体只能在其定义的文件内部访问。如果功能的部分细节只需要在文件内使用时，可以使用 fileprivate 来将其隐藏。
* **private 级别**：限制实体只能在其定义的作用域以及同一文件的 extension 访问。如果功能的部分细节只需要在当前作用域内使用时，可以使用 private 来将其隐藏。

open 为最高访问级别（限制最少），private 为最低访问级别（限制最多）。

## 访问级别基本原则

Swift 中的访问级别遵循一个基本原则：**实体不能定义在具有更低访问级别（更严格）的实体中。** 例如：

* 一个 public 的变量，其类型的访问级别不能是 internal，fileprivate 或者 private。因为无法保证变量的类型在使用变量的地方也具有访问权限。
* 函数的访问级别不能高于它的参数类型和返回类型的访问级别。因为这样就会出现函数可以在任何地方被访问，但是它的参数类型和返回类型却不可以被访问的情况。
